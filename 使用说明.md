# 视频双语字幕生成与交互式复读系统 - 使用说明

## 快速开始

### 1. 运行程序

双击 `Translate.exe` 即可启动程序。

**注意**：首次启动时，程序需要加载 Whisper 模型，可能需要 10-30 秒，这是正常现象，请耐心等待。

### 2. 使用流程

#### 步骤 1：打开视频
1. 点击菜单栏的 **文件 → 打开视频**
2. 选择您要处理的英文视频文件（支持 MP4、MOV、MKV、AVI、FLV、WMV 格式）

#### 步骤 2：生成字幕
- 如果视频已经有字幕文件，程序会自动加载（秒级完成）
- 如果是第一次处理，程序会自动：
  1. 提取音频
  2. 使用 Whisper 进行语音识别（生成英文字幕）
  3. 使用 Google Translate 翻译成中文

**提示**：字幕生成后会自动保存在视频文件同目录下，下次打开时会直接加载，无需重新处理。

#### 步骤 3：播放和复读
1. **播放控制**：使用播放器下方的控制按钮
   - 播放/暂停
   - 进度条拖动
   - 音量调节

2. **查看字幕**：右侧面板显示双语字幕
   - 英文原文
   - 中文翻译
   - 当前播放的句子会自动高亮

3. **复读功能**：
   - 点击任意字幕选中它
   - 在右侧控制面板选择复读次数（3/10/20 次）
   - 点击"开始复读"按钮
   - 程序会自动循环播放该句子指定次数

## 功能特点

### ✅ 已实现的特性

- **自动语音识别**：基于 OpenAI Whisper，准确率高
- **中英双语字幕**：自动翻译，同时显示英文和中文
- **智能字幕缓存**：已处理的视频会自动保存字幕，下次秒开
- **交互式复读**：点击任意句子即可设置复读
- **自定义复读次数**：支持 3、10、20 次复读
- **字幕同步**：播放时字幕自动高亮和滚动
- **点击跳转**：点击字幕直接跳转到对应时间点

### 📋 界面说明

```
┌─────────────────────────────────────────────────────────┐
│ 菜单栏: 文件(F) | 帮助(H)                                 │
├─────────────────────────────────────────────────────────┤
│ ┌─────────────────────┐ ┌─────────────────────────────┐ │
│ │                     │ │      字幕列表                │ │
│ │                     │ │  ┌─────────────────────┐   │ │
│ │   视频播放器        │ │  │ 1. Hello world     │   │ │
│ │                     │ │  │   你好世界          │   │ │
│ │                     │ │  ├─────────────────────┤   │ │
│ │                     │ │  │ 2. How are you?    │   │ │
│ │                     │ │  │   你好吗？          │   │ │
│ │                     │ │  └─────────────────────┘   │ │
│ │                     │ ├─────────────────────────────┤ │
│ │                     │ │     复读控制                │ │
│ │                     │ │  当前字幕: #1               │ │
│ │                     │ │  复读次数: ○正常 ●3 ○10 ○20│ │
│ │                     │ │  [开始复读]                 │ │
│ └─────────────────────┘ └─────────────────────────────┘ │
├─────────────────────────────────────────────────────────┤
│ 状态栏: 就绪                                              │
└─────────────────────────────────────────────────────────┘
```

## 注意事项

### 网络要求

- ✅ **语音识别**：完全离线，不需要网络
- ⚠️ **翻译功能**：需要网络连接（使用 Google Translate）
- ✅ **已生成字幕**：完全离线播放

### 性能建议

- **较短视频**（< 10 分钟）：处理速度快，几分钟内完成
- **较长视频**（> 30 分钟）：处理时间较长，请耐心等待
- **高清视频**：识别准确度更高

### 字幕文件

生成的字幕文件会保存在视频文件同目录下：
- `{视频文件名}_bilingual.json` - 双语字幕（程序使用）
- `{视频文件名}_bilingual.srt` - 标准字幕格式（可分享）

**不要删除这些文件**，这样下次打开时会直接加载，无需重新处理。

### 系统要求

- **操作系统**：Windows 10/11
- **内存**：建议 4GB 以上
- **磁盘空间**：至少 1GB 可用空间
- **网络**：翻译功能需要（首次处理视频时）

## 常见问题

### Q: 程序启动后没有反应？
A: 首次启动需要加载模型（10-30 秒），请耐心等待。

### Q: 翻译失败怎么办？
A:
1. 检查网络连接
2. 确认可以访问 Google 服务
3. 如果网络正常但仍失败，可能是 API 限流，稍后重试

### Q: 如何只播放英文字幕？
A: 目前显示双语字幕，未来版本可能支持切换显示模式。

### Q: 复读时最后一个单词听不清楚？
A: 程序已添加缓冲时间，确保完整播放。如果仍有问题，可以检查视频质量。

### Q: 可以处理中文视频吗？
A: 当前版本主要针对英文视频。中文视频支持正在开发中。

### Q: 字幕不准确怎么办？
A: Whisper 是目前最准确的开源语音识别模型之一。如果有错误，可能是因为：
- 视频音频质量差
- 背景噪音大
- 口音或语速过快

建议：
- 使用高质量音频源
- 尝试使用更大的 Whisper 模型（需要修改配置）

### Q: 如何分享字幕？
A: 生成的 `.srt` 文件可以用于：
- 其他视频播放器（如 VLC、PotPlayer）
- 字幕编辑软件
- 分享给他人

## 技术支持

如果遇到问题：
1. 查看本说明文档
2. 检查网络连接
3. 确认视频文件格式是否支持

## 版本信息

- **版本**：1.0.0
- **打包日期**：2025-01-08
- **Whisper 模型**：base（约 145MB）
- **Python 版本**：3.12

---

**享受您的学习体验！** 🎓
